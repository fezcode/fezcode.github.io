"use strict";(self.webpackChunkfezcodex=self.webpackChunkfezcodex||[]).push([[4694],{4694(e,t,r){r.r(t),r.d(t,{default:()=>T});var a=r(89379),s=r(9950),o=r(82532),n=r(12955),l=r(99636),i=r(8169),c=r(30634),d=r(61700),m=r(42661),x=r(81052),p=r.n(x),h=r(34034),b=r(60917),u=r(17909),f=r(76508),g=r(11314),w=r(44414);const v=e=>{let{item:t,onDragStart:r,onDelete:a}=e;return(0,w.jsxs)("div",{draggable:!0,onDragStart:e=>r(e,t.id),className:"relative group w-20 h-20 bg-black/50 border border-white/10 rounded-sm overflow-hidden cursor-grab active:cursor-grabbing hover:border-emerald-500/50 transition-colors shrink-0",children:["image"===t.type?(0,w.jsx)("img",{src:t.content,alt:"Tier Item",className:"w-full h-full object-cover pointer-events-none"}):(0,w.jsx)("div",{className:"w-full h-full grid place-items-center p-1 bg-[#111] text-white overflow-hidden",children:(0,w.jsx)("span",{className:"item-text-content text-[10px] font-mono text-center break-words leading-tight w-full",children:t.content})}),(0,w.jsx)("button",{onClick:()=>a(t.id),className:"absolute top-0 right-0 bg-black/80 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-0.5 rounded-bl-sm hover:text-red-400",title:"Remove Item","data-html2canvas-ignore":!0,children:(0,w.jsx)(g.q,{size:16,weight:"fill"})})]})};var j=r(98714),y=r(22195);const N=e=>{let{tier:t,onDrop:r,onDragOver:a,onDragStart:o,onUpdateTier:n,onDeleteTier:l,onMoveUp:c,onMoveDown:d,onDeleteItem:m,isFirst:x,isLast:p}=e;const[g,N]=(0,s.useState)(!1),[k,C]=(0,s.useState)(t.label),[D,A]=(0,s.useState)(t.color),S=()=>{C(t.label),A(t.color),N(!0)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"flex w-full min-h-[100px] border-b border-white/10 last:border-b-0 bg-[#0a0a0a]",children:[(0,w.jsxs)("div",{className:"w-24 md:w-32 flex-shrink-0 flex flex-col justify-center items-center p-2 border-r border-white/10 relative group overflow-hidden",style:{backgroundColor:t.color},children:[(0,w.jsx)("span",{className:"tier-label-text text-black font-black text-xl md:text-3xl uppercase tracking-wider text-center select-none cursor-pointer break-words w-full",style:{textShadow:"0 2px 0 rgba(255,255,255,0.2)"},onDoubleClick:S,children:t.label}),(0,w.jsxs)("div",{"data-html2canvas-ignore":!0,className:"absolute inset-0 bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-2 p-2",children:[(0,w.jsxs)("div",{className:"flex gap-1",children:[(0,w.jsx)("button",{onClick:()=>c(t.id),disabled:x,className:"p-1 text-white hover:text-emerald-400 disabled:opacity-30",children:(0,w.jsx)(h.K,{weight:"bold"})}),(0,w.jsx)("button",{onClick:()=>d(t.id),disabled:p,className:"p-1 text-white hover:text-emerald-400 disabled:opacity-30",children:(0,w.jsx)(b.Z,{weight:"bold"})})]}),(0,w.jsxs)("div",{className:"flex gap-1",children:[(0,w.jsx)("button",{onClick:S,className:"p-1 text-white hover:text-blue-400",children:(0,w.jsx)(u.L,{weight:"bold"})}),(0,w.jsx)("button",{onClick:()=>l(t.id),className:"p-1 text-white hover:text-red-400",children:(0,w.jsx)(f.u,{weight:"bold"})})]})]})]}),(0,w.jsxs)("div",{className:"flex-1 p-2 flex flex-wrap gap-2 content-start transition-colors",onDrop:e=>{r(e,t.id)},onDragOver:a,children:[t.items.map(e=>(0,w.jsx)(v,{item:e,onDragStart:r=>o(r,e.id,t.id),onDelete:e=>m(e,t.id)},e.id)),0===t.items.length&&(0,w.jsx)("div",{className:"w-full h-full flex items-center justify-center pointer-events-none opacity-10",children:(0,w.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest",children:"Drop items here"})})]})]}),(0,w.jsx)(y.A,{isOpen:g,onClose:()=>N(!1),item:{label:"Edit Tier",description:"Modify tier properties."},children:(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("label",{className:"block font-mono text-[9px] uppercase text-gray-500 tracking-widest",children:"Tier Label"}),(0,w.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),className:"w-full bg-black/40 border border-white/10 p-3 text-white font-mono text-sm focus:border-emerald-500 focus:outline-none rounded-sm transition-colors",placeholder:"ENTER LABEL..."})]}),(0,w.jsx)(j.A,{label:"Tier Color",value:D,onChange:A,variant:"brutalist"}),(0,w.jsx)("div",{className:"pt-4",children:(0,w.jsxs)("button",{onClick:()=>{n(t.id,{label:k,color:D}),N(!1)},className:"group flex items-center gap-3 bg-white text-black px-6 py-3 font-mono font-black text-xs uppercase tracking-[0.2em] hover:bg-emerald-400 transition-all w-full justify-center",children:[(0,w.jsx)("span",{children:"Save Changes"}),(0,w.jsx)(i.N,{weight:"bold",size:16})]})})]})})]})};var k=r(72301);const C=e=>{let{items:t,onDrop:r,onDragOver:a,onDragStart:n,onAddItems:l,onDelete:i}=e;const c=(0,s.useRef)(null),[d,m]=(0,s.useState)(""),x=()=>{if(!d.trim())return;const e={id:"txt-".concat(Date.now()),type:"text",content:d.trim()};l([e]),m("")};return(0,w.jsxs)("div",{className:"border border-white/10 bg-white/[0.02] p-4 rounded-sm",children:[(0,w.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[(0,w.jsxs)("h3",{className:"font-mono text-xs text-gray-400 uppercase tracking-widest font-bold whitespace-nowrap",children:["Unranked_Assets (",t.length,")"]}),(0,w.jsxs)("div",{className:"flex flex-wrap gap-2 w-full md:w-auto justify-end",children:[(0,w.jsxs)("div",{className:"flex items-center gap-1 bg-black/40 border border-white/10 rounded-sm px-2",children:[(0,w.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()},placeholder:"Add text item...",className:"bg-transparent border-none text-xs font-mono text-white focus:ring-0 w-32 placeholder-gray-600"}),(0,w.jsx)("button",{onClick:x,className:"text-emerald-500 hover:text-emerald-400 p-1",children:(0,w.jsx)(o.c,{weight:"bold"})})]}),(0,w.jsxs)("button",{onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-sm transition-colors text-xs font-mono uppercase text-emerald-400",children:[(0,w.jsx)(k.J,{size:14,weight:"bold"}),(0,w.jsx)("span",{children:"Upload"})]}),(0,w.jsx)("input",{type:"file",multiple:!0,accept:"image/*",ref:c,className:"hidden",onChange:e=>{const t=Array.from(e.target.files);if(0===t.length)return;const r=[];t.forEach(e=>{const a=new FileReader;a.onload=e=>{r.push({id:"img-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:"image",content:e.target.result}),r.length===t.length&&l(r)},a.readAsDataURL(e)}),e.target.value=null}})]})]}),(0,w.jsxs)("div",{className:"min-h-[120px] bg-black/40 border border-white/5 border-dashed rounded-sm p-4 flex flex-wrap gap-2 transition-colors hover:border-white/10",onDrop:e=>{r(e,"pool")},onDragOver:a,children:[t.map(e=>(0,w.jsx)(v,{item:e,onDragStart:t=>n(t,e.id,"pool"),onDelete:e=>i(e,"pool")},e.id)),0===t.length&&(0,w.jsxs)("div",{className:"w-full flex flex-col items-center justify-center text-gray-600 py-8 gap-2 pointer-events-none",children:[(0,w.jsx)(o.c,{size:24}),(0,w.jsx)("span",{className:"font-mono text-xs uppercase tracking-widest",children:"Upload or drop items here"})]})]})]})};var D=r(44374),A=r(22838);const S=[{id:"t1",label:"S",color:"#ff7f7f",items:[]},{id:"t2",label:"A",color:"#ffbf7f",items:[]},{id:"t3",label:"B",color:"#ffdf7f",items:[]},{id:"t4",label:"C",color:"#ffff7f",items:[]},{id:"t5",label:"D",color:"#bfff7f",items:[]}],E="fezcodex_tier_forge_data",T=()=>{const[e,t]=(0,s.useState)(S),[r,x]=(0,s.useState)([]),[h,b]=(0,s.useState)(null),[u,f]=(0,s.useState)(!1),[g,v]=(0,s.useState)({isOpen:!1,title:"",message:"",confirmText:"",onConfirm:()=>{}}),j=(0,s.useRef)(null),{addToast:y}=(0,D.d)();(0,s.useEffect)(()=>{localStorage.getItem(E)&&f(!0)},[]);const k=(e,t,r)=>{b({itemId:t,sourceId:r}),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({itemId:t,sourceId:r}))},T=e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},O=(s,o)=>{let n;s.preventDefault();try{const e=s.dataTransfer.getData("text/plain");if(!e)return;n=h||JSON.parse(e)}catch(d){return void y({title:"Invalid Drop",message:"Only Tier Forge items can be dropped here.",type:"error"})}if(!n||!n.itemId||!n.sourceId)return void y({title:"Invalid Drop",message:"Unknown item format.",type:"error"});const{itemId:l,sourceId:i}=n;if(i===o)return;let c;if("pool"===i)c=r.find(e=>e.id===l);else{const t=e.find(e=>e.id===i);c=t.items.find(e=>e.id===l)}c&&("pool"===i?x(e=>e.filter(e=>e.id!==l)):t(e=>e.map(e=>e.id===i?(0,a.A)((0,a.A)({},e),{},{items:e.items.filter(e=>e.id!==l)}):e)),"pool"===o?x(e=>[...e,c]):t(e=>e.map(e=>e.id===o?(0,a.A)((0,a.A)({},e),{},{items:[...e.items,c]}):e)),b(null))},I=(r,s)=>{t(e.map(e=>e.id===r?(0,a.A)((0,a.A)({},e),s):e))},L=r=>{const a=e.find(e=>e.id===r);x(e=>[...e,...a.items]),t(e.filter(e=>e.id!==r))},R=(r,a)=>{const s=e.findIndex(e=>e.id===r);if(s<0)return;const o=[...e];"up"===a&&s>0?[o[s],o[s-1]]=[o[s-1],o[s]]:"down"===a&&s<o.length-1&&([o[s],o[s+1]]=[o[s+1],o[s]]),t(o)},F=(e,r)=>{"pool"===r?x(t=>t.filter(t=>t.id!==e)):t(t=>t.map(t=>t.id===r?(0,a.A)((0,a.A)({},t),{},{items:t.items.filter(t=>t.id!==e)}):t))},_=()=>{v((0,a.A)((0,a.A)({},g),{},{isOpen:!1}))};return(0,w.jsxs)("div",{className:"space-y-8 font-mono",children:[(0,w.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 border border-white/10 bg-white/[0.02] rounded-sm",children:[(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsxs)("button",{onClick:()=>{const r={id:"t-".concat(Date.now()),label:"NEW",color:"#cccccc",items:[]};t([...e,r])},className:"flex items-center gap-2 px-4 py-2 bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500 hover:text-black border border-emerald-500/20 rounded-sm transition-all text-xs font-bold uppercase tracking-widest",children:[(0,w.jsx)(o.c,{weight:"bold"}),"Add Tier"]}),(0,w.jsxs)("button",{onClick:()=>{v({isOpen:!0,title:"RESET_PROTOCOL",message:"Reset all tiers? Current items will be returned to the pool.",confirmText:"EXECUTE_RESET",onConfirm:()=>{const r=e.flatMap(e=>e.items);x(e=>[...e,...r]),t(S.map(e=>(0,a.A)((0,a.A)({},e),{},{items:[]}))),y({title:"Reset",message:"Board reset to defaults."}),_()}})},className:"flex items-center gap-2 px-4 py-2 bg-white/5 text-gray-400 hover:text-white hover:bg-white/10 border border-white/10 rounded-sm transition-all text-xs font-bold uppercase tracking-widest",children:[(0,w.jsx)(n.j,{weight:"bold"}),"Reset"]}),(0,w.jsxs)("button",{onClick:()=>{v({isOpen:!0,title:"CLEAR_DATA",message:"WARNING: This will permanently remove ALL items from the board and pool.",confirmText:"PURGE_ALL",onConfirm:()=>{x([]),t(S.map(e=>(0,a.A)((0,a.A)({},e),{},{items:[]}))),localStorage.removeItem(E),f(!1),y({title:"Cleared",message:"All data purged."}),_()}})},className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 hover:bg-red-500 hover:text-white border border-red-500/20 rounded-sm transition-all text-xs font-bold uppercase tracking-widest",children:[(0,w.jsx)(l.A,{weight:"bold"}),"Clear"]})]}),(0,w.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,w.jsxs)("button",{onClick:()=>{try{const t={tiers:e,poolItems:r,timestamp:Date.now()};localStorage.setItem(E,JSON.stringify(t)),f(!0),y({title:"Saved",message:"Layout saved to local storage."})}catch(t){console.error("Save failed:",t),y({title:"Error",message:"Failed to save data.",type:"error"})}},className:"flex items-center gap-2 px-4 py-2 bg-blue-500/10 text-blue-400 hover:bg-blue-500 hover:text-white border border-blue-500/20 rounded-sm transition-all text-xs font-bold uppercase tracking-widest",title:"Save to Browser Storage",children:[(0,w.jsx)(i.N,{weight:"bold"}),"Save"]}),(0,w.jsxs)("button",{onClick:()=>{try{const e=localStorage.getItem(E);if(!e)return void y({title:"No Data",message:"No saved layout found.",type:"info"});const{tiers:r,poolItems:a}=JSON.parse(e);v({isOpen:!0,title:"LOAD_PROTOCOL",message:"Load saved layout? Current unsaved changes will be lost.",confirmText:"LOAD_DATA",onConfirm:()=>{t(r||S),x(a||[]),y({title:"Loaded",message:"Layout loaded successfully."}),_()}})}catch(e){console.error("Load failed:",e),y({title:"Error",message:"Failed to load data.",type:"error"})}},className:"flex items-center gap-2 px-4 py-2 bg-purple-500/10 text-purple-400 hover:bg-purple-500 hover:text-white border border-purple-500/20 rounded-sm transition-all text-xs font-bold uppercase tracking-widest",title:"Load from Browser Storage",children:[(0,w.jsx)(c.e,{weight:"bold"}),"Load"]}),u&&(0,w.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-emerald-500/10 border border-emerald-500/20 rounded-sm animate-pulse",children:[(0,w.jsx)(d.m,{weight:"fill",className:"text-emerald-500",size:12}),(0,w.jsx)("span",{className:"text-[10px] text-emerald-500 font-bold uppercase tracking-widest leading-none",children:"Saved Data Exists"})]})]}),(0,w.jsxs)("button",{onClick:async()=>{if(j.current)try{y({title:"Processing",message:"Generating image artifact..."});const e=await p()(j.current,{backgroundColor:"#050505",useCORS:!0,allowTaint:!0,scale:2,scrollX:0,scrollY:-window.scrollY,onclone:e=>{const t=e.getElementById("tier-forge-chart");t&&(t.style.overflow="visible",t.style.height="auto");e.querySelectorAll(".tier-label-text").forEach(e=>{e.style.transform="translateY(-10px)"});e.querySelectorAll(".item-text-content").forEach(e=>{e.style.transform="translateY(-4px)"})}}),t=document.createElement("a");t.download="tier-forge-".concat(Date.now(),".png"),t.href=e.toDataURL("image/png"),t.click(),y({title:"Success",message:"Artifact captured."})}catch(e){console.error(e),y({title:"Error",message:"Failed to capture artifact.",type:"error"})}},className:"flex items-center gap-2 px-6 py-2 bg-white text-black hover:bg-gray-200 rounded-sm transition-all text-xs font-black uppercase tracking-widest shadow-[0_0_15px_rgba(255,255,255,0.1)]",children:[(0,w.jsx)(m.x,{weight:"fill",size:16}),"Capture Artifact"]})]}),(0,w.jsxs)("div",{ref:j,id:"tier-forge-chart",className:"flex flex-col border border-white/10 bg-[#050505] shadow-2xl",children:[e.map((t,r)=>(0,w.jsx)(N,{tier:t,isFirst:0===r,isLast:r===e.length-1,onDrop:O,onDragOver:T,onDragStart:k,onUpdateTier:I,onDeleteTier:L,onMoveUp:e=>R(e,"up"),onMoveDown:e=>R(e,"down"),onDeleteItem:F},t.id)),(0,w.jsx)("div",{className:"w-full bg-[#111] border-t border-white/10 p-2 text-center",children:(0,w.jsx)("span",{className:"text-[10px] text-gray-600 uppercase tracking-[0.5em] font-black",children:"FEZCODEX // TIER_FORGE"})})]}),(0,w.jsx)(C,{items:r,onDrop:O,onDragOver:T,onDragStart:k,onAddItems:e=>{x(t=>[...t,...e]),y({title:"Uploaded",message:"".concat(e.length," assets added to pool.")})},onDelete:F}),(0,w.jsx)(A.A,{isOpen:g.isOpen,title:g.title,message:g.message,confirmText:g.confirmText,onClose:_,onConfirm:g.onConfirm})]})}},22838(e,t,r){r.d(t,{A:()=>i});r(9950);var a=r(53291),s=r(34272),o=r(39886),n=r(35951),l=r(44414);const i=e=>{let{isOpen:t,onClose:r,onConfirm:i,children:c,title:d="SYSTEM_CONFIRMATION",message:m="Are you sure you want to execute this operation?",confirmText:x="CONFIRM_ACTION",cancelText:p="ABORT_OPERATION",variant:h="default"}=e;const b="paper"===h;return(0,l.jsx)(a.N,{children:t&&(0,l.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[(0,l.jsx)(s.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 backdrop-blur-md ".concat(b?"bg-[#1a1a1a]/40":"bg-black/80")}),(0,l.jsxs)(s.P.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative w-full max-w-lg p-8 md:p-12 rounded-sm shadow-2xl overflow-hidden border ".concat(b?"bg-[#e9e4d0] border-[#1a1a1a] text-[#1a1a1a]":"bg-[#050505] border-white/10 text-white"),onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none grayscale",children:(0,l.jsx)(n.A,{seed:d,className:"w-full h-full"})}),(0,l.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 ".concat(b?"border-[#1a1a1a]":"border-emerald-500")}),(0,l.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 ".concat(b?"border-[#1a1a1a]":"border-emerald-500")}),(0,l.jsx)("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 ".concat(b?"border-[#1a1a1a]":"border-emerald-500")}),(0,l.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 ".concat(b?"border-[#1a1a1a]":"border-emerald-500")}),(0,l.jsxs)("div",{className:"relative z-10 space-y-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,l.jsx)("h3",{className:"text-2xl font-black font-mono tracking-tighter uppercase italic leading-none ".concat(b?"text-[#1a1a1a]":"text-white"),children:d}),(0,l.jsx)("button",{onClick:r,className:"p-1 transition-colors ".concat(b?"text-[#1a1a1a]/40 hover:text-[#1a1a1a]":"text-gray-500 hover:text-white"),children:(0,l.jsx)(o.u,{weight:"bold",size:24})})]}),c?(0,l.jsx)("div",{className:"relative z-10",children:c}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"h-px w-12 ".concat(b?"bg-[#1a1a1a]":"bg-emerald-500")}),(0,l.jsx)("p",{className:"font-mono text-xs uppercase tracking-widest leading-relaxed ".concat(b?"text-[#1a1a1a]/60":"text-gray-400"),children:m})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,l.jsx)("button",{onClick:i,className:"flex-1 py-4 font-black uppercase tracking-[0.3em] transition-all text-xs ".concat(b?"bg-[#1a1a1a] text-[#e9e4d0] hover:opacity-90":"bg-white text-black hover:bg-emerald-400"),children:x}),(0,l.jsx)("button",{onClick:r,className:"flex-1 py-4 border transition-all font-mono text-[10px] uppercase tracking-widest ".concat(b?"border-[#1a1a1a]/20 text-[#1a1a1a]/40 hover:border-[#1a1a1a] hover:text-[#1a1a1a]":"border-white/10 text-gray-500 hover:text-white hover:bg-white/5"),children:p})]})]})]})]})]})})}},98714(e,t,r){r.d(t,{A:()=>m});var a=r(9950),s=r(53291),o=r(34272),n=r(55753),l=r(39886),i=r(44414);const c=[{name:"Pure Void",hex:"#050505"},{name:"Paper White",hex:"#F5F5F5"},{name:"Emerald Flux",hex:"#10b981"},{name:"Salmon Signal",hex:"#FA8072"},{name:"Cyber Cyan",hex:"#00FFFF"},{name:"Neon Violet",hex:"#a855f7"},{name:"Amber Warning",hex:"#f59e0b"},{name:"Royal Gold",hex:"#D4AF37"},{name:"Crimson Data",hex:"#ef4444"},{name:"Cobalt Core",hex:"#3b82f6"},{name:"Deep Slate",hex:"#1e293b"},{name:"Ghost Gray",hex:"#94a3b8"}],d=(e,t,r)=>{let a,s,o;const n=Math.floor(6*e),l=6*e-n,i=r*(1-t),c=r*(1-l*t),d=r*(1-(1-l)*t);switch(n%6){case 0:a=r,s=d,o=i;break;case 1:a=c,s=r,o=i;break;case 2:a=i,s=r,o=d;break;case 3:a=i,s=c,o=r;break;case 4:a=d,s=i,o=r;break;case 5:a=r,s=i,o=c}const m=e=>Math.round(255*e).toString(16).padStart(2,"0");return"#".concat(m(a)).concat(m(s)).concat(m(o))},m=e=>{let{value:t,onChange:r,label:m,variant:x="default"}=e;const[p,h]=(0,a.useState)(!1),[b,u]=(0,a.useState)({h:0,s:0,v:0}),[f,g]=(0,a.useState)(t),w=(0,a.useRef)(null),v=(0,a.useRef)(null),j=(0,a.useRef)(null),y="brutalist"===x;(0,a.useEffect)(()=>{try{u((e=>{let t=0,r=0,a=0;4===e.length?(t=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),a=parseInt(e[3]+e[3],16)):7===e.length&&(t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16)),t/=255,r/=255,a/=255;const s=Math.max(t,r,a),o=Math.min(t,r,a);let n,l,i=s;const c=s-o;if(l=0===s?0:c/s,s===o)n=0;else{switch(s){case t:n=(r-a)/c+(r<a?6:0);break;case r:n=(a-t)/c+2;break;case a:n=(t-r)/c+4}n/=6}return{h:n,s:l,v:i}})(t)),g(t)}catch(e){u({h:0,s:0,v:0})}},[t]),(0,a.useEffect)(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,i.jsxs)("div",{className:"space-y-2",ref:w,children:[m&&(0,i.jsx)("label",{className:"block font-mono text-[9px] uppercase text-gray-600 tracking-widest",children:m}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsxs)("button",{onClick:()=>h(!p),className:"w-full flex items-center gap-3 p-2 bg-black/40 border transition-all rounded-sm group ".concat(y?"border-white/20 hover:border-emerald-500/50":"border-white/10 hover:border-white/30"),children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded-sm border border-white/20 shadow-inner shrink-0",style:{backgroundColor:t}}),(0,i.jsx)("span",{className:"font-mono text-[10px] uppercase tracking-widest text-gray-400 group-hover:text-white transition-colors",children:t.toUpperCase()}),(0,i.jsx)(n.J,{className:"ml-auto text-gray-600 group-hover:text-emerald-500 transition-colors",size:14})]}),(0,i.jsx)(s.N,{children:p&&(0,i.jsxs)(o.P.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute z-50 top-full mt-2 w-64 bg-[#0a0a0a] border border-white/20 p-4 shadow-[0_20px_50px_rgba(0,0,0,0.8)] rounded-sm",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-white/5",children:[(0,i.jsx)("span",{className:"font-mono text-[9px] font-bold text-emerald-500 uppercase tracking-widest",children:"Color_Matrix"}),(0,i.jsx)("button",{onClick:()=>h(!1),className:"text-gray-600 hover:text-white",children:(0,i.jsx)(l.u,{size:12})})]}),(0,i.jsxs)("div",{ref:v,onMouseDown:e=>{const t=e=>{const t=v.current.getBoundingClientRect();let a=(e.clientX-t.left)/t.width,s=1-(e.clientY-t.top)/t.height;a=Math.max(0,Math.min(1,a)),s=Math.max(0,Math.min(1,s)),r(d(b.h,a,s))},a=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",a)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",a),t(e)},className:"relative w-full aspect-video mb-4 cursor-crosshair rounded-sm overflow-hidden border border-white/10",style:{backgroundColor:d(b.h,1,1)},children:[(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-transparent"}),(0,i.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black to-transparent"}),(0,i.jsx)("div",{className:"absolute w-3 h-3 border-2 border-white rounded-full -translate-x-1/2 -translate-y-1/2 shadow-[0_0_5px_rgba(0,0,0,0.5)] pointer-events-none",style:{left:"".concat(100*b.s,"%"),top:"".concat(100*(1-b.v),"%")}})]}),(0,i.jsx)("div",{ref:j,onMouseDown:e=>{const t=e=>{const t=j.current.getBoundingClientRect();let a=(e.clientX-t.left)/t.width;a=Math.max(0,Math.min(1,a)),r(d(a,b.s,b.v))},a=()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",a)};window.addEventListener("mousemove",t),window.addEventListener("mouseup",a),t(e)},className:"relative w-full h-4 mb-6 cursor-pointer rounded-sm border border-white/10",style:{background:"linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)"},children:(0,i.jsx)("div",{className:"absolute top-0 bottom-0 w-1.5 bg-white border border-black/40 -translate-x-1/2 shadow-md pointer-events-none",style:{left:"".concat(100*b.h,"%")}})}),(0,i.jsx)("div",{className:"grid grid-cols-6 gap-1.5 mb-4",children:c.map(e=>(0,i.jsx)("button",{onClick:()=>{r(e.hex)},className:"w-full aspect-square rounded-sm border transition-all ".concat(t.toLowerCase()===e.hex.toLowerCase()?"border-emerald-500 scale-110 z-10":"border-white/10 hover:border-white/40"),style:{backgroundColor:e.hex},title:e.name},e.hex))}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsxs)("div",{className:"relative w-full bg-black/40 border border-white/10 rounded-sm overflow-hidden flex items-center px-3 h-8",children:[(0,i.jsx)("input",{type:"text",value:f.toUpperCase(),onChange:e=>{const t=e.target.value;g(t);let a=t;!a.startsWith("#")&&a.length>0&&(a="#"+a),(/^#([0-9A-F]{3}){1,2}$/i.test(a)||/^#([0-9A-F]{4}){1,2}$/i.test(a))&&r(a)},onBlur:()=>g(t),className:"w-full bg-transparent font-mono text-[10px] text-white outline-none uppercase tracking-widest"}),(0,i.jsx)("div",{className:"w-4 h-4 rounded-sm border border-white/10 shrink-0",style:{backgroundColor:t}})]})})]})})]})]})}}}]);